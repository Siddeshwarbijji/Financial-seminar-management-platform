<section class="container my-4">
  <!-- Page Header -->
  <div class="text-center mb-4">
    <h2>All Events</h2>
    <p class="text-muted">Browse upcoming sessions and enroll.</p>
  </div>

  <!-- Error and Success Messages -->
  <div *ngIf="showError" class="alert alert-danger">{{ errorMessage }}</div>
  <div *ngIf="showMessage" class="alert alert-success">{{ responseMessage }}</div>

  <!-- Events Table -->
  <div *ngIf="eventList.length > 0; else noEventsBlock">
    <table class="table table-bordered table-striped">
      <thead class="table-dark">
        <tr>
          <th>Title</th>
          <th>Date</th>
          <th>Location</th>
          <th>Status</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let event of eventList">
          <td>{{ event.title }}</td>
          <td>{{ event.schedule | date:'mediumDate' }}</td>
          <td>{{ event.location }}</td>
          <td>
            <span class="badge bg-success">{{ event.status || 'N/A' }}</span>
          </td>
          <td>
            <!-- Participant Actions -->
            <ng-container *ngIf="authService.getRole === 'participant'">
              <button class="btn btn-outline-primary btn-sm me-2" (click)="viewDetails(event)">View Details</button>
              <button class="btn btn-primary btn-sm" (click)="enroll(event.id)">Enroll</button>
            </ng-container>

            <!-- Institution Actions -->
            <ng-container *ngIf="authService.getRole === 'institution'">
              <!-- <button class="btn btn-outline-primary btn-sm me-2" (click)="viewDetails(event)">View Details</button> -->
              <!-- <button class="btn btn-secondary btn-sm" (click)="checkStatus(event.id)">Check Status</button> -->
            </ng-container>

            <!-- Professional Actions -->
            <ng-container *ngIf="authService.getRole === 'professional'">
              <button class="btn btn-outline-primary btn-sm" (click)="viewDetails(event)">View Details</button>
            </ng-container>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- No Events Message -->
  <ng-template #noEventsBlock>
    <div class="text-center text-muted">
      <i class="bi bi-calendar2-x" style="font-size: 2rem;"></i>
      <p>No events available.</p>
    </div>
  </ng-template>

  <!-- Feedback Section -->
  <div *ngIf="selectedEvent?.id" class="mt-4">
    <h4>Submit Feedback for: {{ selectedEvent.title }}</h4>
    <div class="mb-3">
      <textarea
        class="form-control"
        [(ngModel)]="formModel.feedback"
        rows="3"
        placeholder="Write your feedback here..."
      ></textarea>
    </div>
    <button class="btn btn-success" (click)="saveFeedBack()">Submit Feedback</button>
  </div>

  <!-- Status Display -->
  <div *ngIf="status" class="mt-3">
    <p><strong>Event Status:</strong> {{ status }}</p>
  </div>
</section>